package utils

import (
	"fmt"
	"strings"
	"time"
)

/*
------------------------------------------------------------
ğŸ•’ Go æ—¶é—´æ ¼å¼æ ·ä¾‹å¯¹ç…§è¡¨ï¼ˆtime.Format / time.Parse ç”¨æ³•ï¼‰

Go çš„æ—¶é—´æ ¼å¼åŒ–æ˜¯é€šè¿‡å›ºå®šçš„æ—¶é—´æ ·ä¾‹ï¼š
    Mon Jan 2 15:04:05 MST 2006
æ¥å®šä¹‰æ ¼å¼çš„ â€”â€” å³ï¼š
    2006 å¹´ 1 æœˆ 2 æ—¥ 15 æ—¶ 04 åˆ† 05 ç§’ï¼ˆMST æ—¶åŒºï¼‰

âš ï¸ æ³¨æ„ï¼šGo ä¸ä½¿ç”¨ "yyyy-MM-dd HH:mm:ss" è¿™æ ·çš„å ä½ç¬¦ï¼

å¸¸è§æ ¼å¼ç¬¦å¯¹åº”è¡¨ï¼š
------------------------------------------------------------
| ç¤ºä¾‹ç¬¦å· | å¯¹åº”æ—¶é—´æ ·ä¾‹ | è¯´æ˜ï¼ˆæ„ä¹‰ï¼‰                  |
|-----------|---------------|------------------------------|
| 2006      | å¹´ (Year)     | å››ä½æ•°å¹´ä»½                   |
| 06        | å¹´ (Year)     | ä¸¤ä½æ•°å¹´ä»½ï¼ˆ06 è¡¨ç¤º 2006ï¼‰   |
| 01        | æœˆ (Month)    | ä¸¤ä½æ•°æœˆä»½ï¼ˆ01 è¡¨ç¤ºä¸€æœˆï¼‰    |
| 1         | æœˆ (Month)    | ä¸€ä½æ•°æœˆä»½ï¼ˆ1 è¡¨ç¤ºä¸€æœˆï¼‰     |
| 02        | æ—¥ (Day)      | ä¸¤ä½æ•°æ—¥æœŸï¼ˆ02 è¡¨ç¤º 2 æ—¥ï¼‰   |
| 2         | æ—¥ (Day)      | ä¸€ä½æ•°æ—¥æœŸï¼ˆ2 è¡¨ç¤º 2 æ—¥ï¼‰    |
| 15        | æ—¶ (Hour)     | 24 å°æ—¶åˆ¶ï¼ˆ15 è¡¨ç¤ºä¸‹åˆ 3 ç‚¹ï¼‰|
| 03        | æ—¶ (Hour)     | 12 å°æ—¶åˆ¶ï¼ˆ03 è¡¨ç¤ºä¸‹åˆ 3 ç‚¹ï¼‰|
| 04        | åˆ† (Minute)   | åˆ†é’Ÿï¼ˆ04 è¡¨ç¤º 4 åˆ†é’Ÿï¼‰       |
| 05        | ç§’ (Second)   | ç§’é’Ÿï¼ˆ05 è¡¨ç¤º 5 ç§’ï¼‰         |
| PM        | ä¸Š/ä¸‹åˆæ ‡è¯†   | AM æˆ– PM                     |
| Mon       | æ˜ŸæœŸ (Weekday)| è‹±æ–‡æ˜ŸæœŸç¼©å†™ï¼ˆMon è¡¨ç¤ºå‘¨ä¸€ï¼‰ |
| Monday    | æ˜ŸæœŸ (Weekday)| è‹±æ–‡æ˜ŸæœŸå…¨ç§°                 |
| Jan       | æœˆä»½ (Month)  | è‹±æ–‡æœˆä»½ç¼©å†™ï¼ˆJan è¡¨ç¤ºä¸€æœˆï¼‰ |
| January   | æœˆä»½ (Month)  | è‹±æ–‡æœˆä»½å…¨ç§°                 |
| MST       | æ—¶åŒº (TZ)     | æ—¶åŒºç¼©å†™ï¼ˆå¦‚ CST, UTCï¼‰      |
| -0700     | æ—¶åŒº (TZ)     | æ—¶åŒºåç§»é‡ï¼ˆä¾‹ï¼š+0800ï¼‰      |
| -07:00    | æ—¶åŒº (TZ)     | æ—¶åŒºåç§»é‡ï¼ˆå¸¦å†’å·ï¼‰         |
------------------------------------------------------------

ğŸ¯ å¸¸è§æ ¼å¼ç¤ºä¾‹ï¼š
------------------------------------------------------------
| æè¿°                  | æ ¼å¼å­—ç¬¦ä¸²               | è¾“å‡ºç¤ºä¾‹                 |
|------------------------|---------------------------|---------------------------|
| æ ‡å‡†æ—¶é—´æ ¼å¼           | "2006-01-02 15:04:05"    | 2025-10-29 14:35:08       |
| ç´§å‡‘æ—¶é—´æˆ³             | "20060102150405"         | 20251029143508            |
| æ—¥æœŸ(yyyyMMdd)         | "20060102"               | 20251029                  |
| æ—¥æœŸ(yyyy-MM-dd)       | "2006-01-02"             | 2025-10-29                |
| æ—¶é—´(HH:mm:ss)         | "15:04:05"               | 14:35:08                  |
| æ—¥å¿—æ–‡ä»¶åæ ·å¼         | "2006-01-02_15-04-05"    | 2025-10-29_14-35-08       |
| å«æ—¶åŒºå®Œæ•´æ ¼å¼         | "2006-01-02 15:04:05 -0700 MST" | 2025-10-29 14:35:08 +0800 CST |
------------------------------------------------------------
*/

// FormatTime è·å–å½“å‰æ—¶é—´å¹¶æ ¼å¼åŒ–è¾“å‡º
// æ”¯æŒå¤šç§å¸¸è§æ ¼å¼ï¼Œå¦‚ï¼š
// "yyyy-MM-dd HH:mm:ss", "yyyyMMdd", "HH:mm:ss", "yyyy/MM/dd HH:mm"
func FormatTime(format string) string {
	now := time.Now()

	// å°†è‡ªå®šä¹‰æ ¼å¼è½¬æ¢ä¸º Go çš„æ—¶é—´æ¨¡æ¿
	layout := convertFormat(format)

	return now.Format(layout)
}

// PrintLog æ‰“å°å¸¦æ—¶é—´å‰ç¼€çš„æ—¥å¿—ï¼ˆå¯ä½œä¸ºç®€æ˜“æ—¥å¿—å‡½æ•°ï¼‰
func PrintLog(level, msg string) {
	timestamp := FormatTime("yyyy-MM-dd HH:mm:ss")
	fmt.Printf("[%s] [%s] %s\n", timestamp, strings.ToUpper(level), msg)
}

// convertFormat å°† Java é£æ ¼æ ¼å¼ï¼ˆyyyy/MM/dd HH:mm:ssï¼‰è½¬æ¢ä¸º Go æ¨¡æ¿æ ¼å¼
func convertFormat(format string) string {
	replacer := strings.NewReplacer(
		"yyyy", "2006",
		"MM", "01",
		"dd", "02",
		"HH", "15",
		"mm", "04",
		"ss", "05",
	)
	return replacer.Replace(format)
}
